@model E_Commerce.Models.Customer.Product.CustomerProductListViewModel

<div style="max-width: 1000px; margin: 20px auto;">
    <h2>Products</h2>
    <hr />

    <form method="get" style="margin-bottom: 20px; padding: 15px; background-color: #f5f5f5;">
        <table style="width: 100%;">
            <tr>
                <td style="width: 200px;">
                    <label>Search by Name:</label>
                </td>
                <td>
                    <input type="text" name="search" value="@Model.Search" placeholder="Enter product name" style="width: 300px; padding: 5px;" />
                </td>
                <td rowspan="2" style="text-align: right; vertical-align: middle;">
                    <button type="submit" style="padding: 8px 20px;">Search</button>
                    <a asp-action="Index" style="padding: 8px 20px; text-decoration: none;">Clear</a>
                </td>
            </tr>
            <tr>
                <td>
                    <label>Filter by Category:</label>
                </td>
                <td>
                    <input type="text" name="category" value="@Model.Category" placeholder="Enter category" style="width: 300px; padding: 5px;" />
                </td>
            </tr>
        </table>
    </form>

    @if (!Model.Products.Any())
    {
        <p>No products found.</p>
    }
    else
    {
        <p>Showing @Model.Products.Count() of @Model.TotalCount products</p>
        
        <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
            <thead>
                <tr style="background-color: #e0e0e0;">
                    <th style="padding: 10px; text-align: left; border: 1px solid #ccc;">Product Name</th>
                    <th style="padding: 10px; text-align: left; border: 1px solid #ccc;">Category</th>
                    <th style="padding: 10px; text-align: right; border: 1px solid #ccc;">Price</th>
                    <th style="padding: 10px; text-align: center; border: 1px solid #ccc;">Stock</th>
                    <th style="padding: 10px; text-align: center; border: 1px solid #ccc;">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var product in Model.Products)
                {
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ccc;">@product.Name</td>
                        <td style="padding: 10px; border: 1px solid #ccc;">@product.Category</td>
                        <td style="padding: 10px; text-align: right; border: 1px solid #ccc;">$@product.Price.ToString("F2")</td>
                        <td style="padding: 10px; text-align: center; border: 1px solid #ccc;">
                            @if (product.InStock)
                            {
                                <span style="color: green;">@product.StockQuantity</span>
                            }
                            else
                            {
                                <span style="color: red;">Out of Stock</span>
                            }
                        </td>
                        <td style="padding: 10px; text-align: center; border: 1px solid #ccc;">
                            @if (product.InStock)
                            {
                                <form asp-area="Customer" asp-controller="Cart" asp-action="AddToCart" method="post" style="display: inline;">
                                    <input type="hidden" name="productId" value="@product.Id" />
                                    <input type="number" name="quantity" value="1" min="1" max="@product.StockQuantity" style="width: 50px; padding: 3px;" />
                                    <button type="submit" style="padding: 5px 15px; margin-left: 5px;">Add to Cart</button>
                                </form>
                            }
                            else
                            {
                                <span style="color: #999;">Unavailable</span>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        
        <partial name="_CustomerPagination" model="Model" />
    }
</div>
